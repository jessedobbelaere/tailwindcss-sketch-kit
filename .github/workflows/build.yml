name: Build

on:
  push:
    branches:
      - master
    paths:
      - "**.sketch"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: oleksiyrudenko/gha-git-credentials@v1
        with:
          token: "${{ secrets.GITHUB_TOKEN }}"
      - name: Build
        run: |
          sudo mv /etc/ImageMagick-6/policy.xml /etc/ImageMagick-6/policy.xml.off
          ./generate-previews.sh
          ls -al images/
          git add images/* && git commit -m "ðŸŽ¨ Update preview images" && git push
